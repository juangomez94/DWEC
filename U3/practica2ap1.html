<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Práctica 2 Apartado 1</title>
    <script>
      var crono=new Object();
      var ventana;

      crono.botonContar=function(){
        crono.inicio = new Date().getTime();

        if(ventana==undefined){
          ventana=window.open("", "", "width=600,height=300");
        }

        ventana.document.body.innerHTML=('00:00:00');
        crono.contar();
      }

      crono.contar=function(){
        var time = new Date().getTime();
        var diff = new Date(time-crono.inicio);
        var h = diff.getUTCHours();
        var m = diff.getUTCMinutes();
        var s = diff.getUTCSeconds();
        ventana.document.body.innerHTML=crono.formatear(h) + ":" + crono.formatear(m) + ":" + crono.formatear(s);
        crono.timer = setTimeout(crono.contar, 1000);
      }

      crono.formatear=function(i) {
        if (i < 10) {
          i = "0" + i;
        }
        return i;
      }

      crono.parar=function(){
        clearTimeout(crono.timer);
        var h="00";
        var m="00";
        var s="00";
        ventana.document.body.innerHTML= h + ":" + m + ":" + s;
      }
    </script>
  </head>
  <body>

    <h1>
      Cronómetro
    </h1>

    <input type="button" name="contar" value="Contar" onclick="crono.botonContar()">
    <input type="button" name="parar" value="Parar" onclick="crono.parar()">

  </body>
</html>
